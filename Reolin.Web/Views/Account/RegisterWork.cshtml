<div class="container">
    <div class="row">
        <div class="position">
            <div class="login-form register-cv-form">
                <div class="login-head">
                    <h3 class="register-cv-title">Create Your Work Profile</h3>
                    <span>
                        <i class="fa fa-arrow-left"></i>
                        <a href="register.html" class="register-cv-back">back to register</a>
                    </span>
                    <input id="Text1" class="secret-input" type="text" />
                </div>
                <div class="login-body">
                    <section class="content bgcolor-8">
                        <div class="register-input">

                            <label for="fullname">Enter Your Location Or Perimeter</label>
                            <!--<div class="perimeter" >
                                <img src="img/icon/location-work.png" alt="" />
                            </div>-->
                            <div class="perimeter">
                                <button data-target="#us6-dialog" class="perimeter-btn" data-toggle="modal"></button>
                            </div>
                            <div class="majorcategory main-category">
                                <label for="fullname">Select Your SubCategory</label>
                                <select id="SubCategory" class="regcv-select">
                                    @*<option>Sale</option>
                                        <option>Manufacture</option>
                                        <option>Services</option>*@
                                </select>
                            </div>

                            <div class="majorcategory">
                                <label for="fullname">Select Your Job Category</label>
                                <select id="MainCategory" class="job-cat"></select>
                            </div>
                            <label for="phonenumber">Enter Your Profile name</label>
                            <input id="FullName" type="text" />

                            <label for="phonenumber" class="reg-work-phone">Enter Your Phone Number</label>
                            <input id="PhoneNumber" type="text" required />
                        </div>

                        <hr />
                        <div class="register-body">
                            <label for="fullname" class="lable-regcv-username">Username</label>
                            <input id="UserName" class="input-regcv-username" type="text" />

                            <label for="fullname" class="lable-regcv-username">Email</label>
                            <input id="Email" class="input-regcv-username" type="text" />

                            <label for="fullname" class="lable-regcv-pass">Password</label>
                            <input id="Password" type="text" class="input-regcv-pass" />

                            <label for="fullname" class="lable-regcv-repass">Re-En Password</label>
                            <input id="ConfirmPassword" type="text" class="input-regcv-pass" />
                        </div>

                        <div class="">
                            <div class="">
                                <input id="RegisterButton" class="login-btn register-cv-btn" type="button" value="continue" />
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </div>
</div>
<div id="us6-dialog" class="modal fade">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Select You Location</h4>
            </div>
            <div class="modal-body">
                <div class="form-horizontal" style="width: 550px">
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Location:</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control layoot-input" id="us3-address" />
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 control-label">Radius:</label>
                        <div class="col-sm-5">
                            <input type="text" class="form-control layoot-input" id="us3-radius" />
                        </div>
                    </div>
                    <div id="us3" style="width: 100%; height: 300px;"></div>
                    <div class="clearfix">&nbsp;</div>
                    <div class="m-t-small">
                        <label class="p-r-small col-sm-1 control-label">Lat.:</label>
                        <div class="col-sm-3">
                            <input type="text" class="form-control layoot-input" style="width: 110px" id="us3-lat" />
                        </div>
                        <label class="p-r-small col-sm-2 control-label">Long.:</label>
                        <div class="col-sm-3">
                            <input type="text" class="form-control layoot-input" style="width: 110px" id="us3-lon" />
                        </div>
                    </div>
                    <div class="clearfix"></div>

                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="suggest-btn-save" data-dismiss="modal">Close</button>
                <button type="button" class="suggest-btn-save">Save changes</button>
            </div>
        </div>
        <!-- /.modal-content -->
    </div>
    <!-- /.modal-dialog -->
</div>
@section Scripts{

    <script type="text/javascript" src='https://maps.google.com/maps/api/js?sensor=false&libraries=places'></script>

    <script src="/content/js/locationpicker.jquery.min.js"></script>
    <script src="~/lib/WebClient/controllers/JobCategoryController.js"></script>


    <script src="/lib/WebClient/DefaultJwtManager.js"></script>
    <script src="/lib/WebClient/HttpService.js"></script>
    <script src="/lib/WebClient/LocalJwtStore.js"></script>
    <script src="/lib/WebClient/RemoteJwtSource.js"></script>
    <script src="/lib/WebClient/LoginInfo.js"></script>
    <script src="/lib/WebClient/HttpResponse.js"></script>
    <script src="/lib/WebClient/JwtSecurityToken.js"></script>
    <script src="/lib/Infra/User.js"></script>


    <script src="/lib/WebClient/Helpers/URLS.js"></script>
    <script src="/lib/WebClient/Global.js"></script>
    <script src="/lib/WebClient/run.js"></script>

    <script src="~/lib/WebClient/Services/AccountService.js"></script>
    <script src="/lib/WebClient/Services/ProfileServices.js"></script>
    <script src="/lib/WebClient/controllers/AccountController.js"></script>

    <script src="~/lib/WebClient/controllers/RegisterWorkController.js"></script>



    <script>
        var observer = new MutationObserver(function (mutations) {
            for (var i = 0; mutations[i]; ++i) {
                if (mutations[i].addedNodes[0].nodeName == "SCRIPT" && mutations[i].addedNodes[0].src.match(/\/AuthenticationService.Authenticate?/g)) {
                    var str = mutations[i].addedNodes[0].src.match(/[?&]callback=.*[&$]/g);
                    if (str) {
                        if (str[0][str[0].length - 1] == '&') {
                            str = str[0].substring(10, str[0].length - 1);
                        } else {
                            str = str[0].substring(10);
                        }
                        var split = str.split(".");
                        var object = split[0];
                        var method = split[1];
                        window[object][method] = null;
                    }
                    observer.disconnect();
                }
            }
        });
        var config = { attributes: true, childList: true, characterData: true }
        observer.observe(document.head, config);

        $('#us3').locationpicker({
            location: {
                latitude: 46.15242437752303,
                longitude: 2.7470703125
            },
            radius: 300,
            inputBinding: {
                latitudeInput: $('#us3-lat'),
                longitudeInput: $('#us3-lon'),
                radiusInput: $('#us3-radius'),
                locationNameInput: $('#us3-address')
            },
            enableAutocomplete: true,
            markerIcon: 'http://www.iconsdb.com/icons/preview/tropical-blue/map-marker-2-xl.png'
        });
        $('#us6-dialog').on('shown.bs.modal', function () {
            $('#us3').locationpicker('autosize');
        });
    </script>

    <script>
        var controller = new Reolin.Web.Client.Controllers.JobCategoryController();
        controller.GetJobCategories($("#MainCategory"));
        controller.GetSubCategories($("#SubCategory"));
        $.getJSON("http://maps.googleapis.com/maps/api/geocode/json?latlng=33.00167849978695,54.190244435058844&sensor=true", null, function (d) {
            var results = d.results;
            if (d.status === 'OK') {
                if (results[0]) {
                    var add = results[0].formatted_address;
                    var value = add.split(",");

                    count = value.length;
                    country = value[count - 1];
                    state = value[count - 2];
                    city = value[count - 3];
                    console.log("city: " + city);
                    console.log("country: " + country);
                }
                else {
                    alert("address not found");
                }
            }
            else {
                alert("Geocoder failed due to: " + status);
            }
        })
    </script>
}